import{a as w,S,i as s}from"./assets/vendor-5YrzWRhu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const C="51915317-a5ee9a5ba63d3f1e31a6123a4",R="https://pixabay.com/api/";async function g(o,e=1){try{return(await w.get(R,{params:{key:C,q:o,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:e}})).data}catch(n){return console.error("Помилка запиту до Pixabay API:",n),null}}const u=document.querySelector(".gallery"),y=document.querySelector(".loader"),L=document.querySelector(".load-more");let f;function q(o){const e=document.createElement("li");e.classList.add("gallery-item");const n=document.createElement("a");n.href=o.largeImageURL;const i=document.createElement("img");i.src=o.webformatURL,i.alt=o.tags,i.loading="lazy",n.appendChild(i),e.appendChild(n);const t=document.createElement("p");t.classList.add("caption");const r=o.tags.split(",").map(a=>a.trim());return t.textContent=r.slice(0,3).join(", "),e.appendChild(t),e}function b(o){const e=document.createDocumentFragment();o.forEach(n=>{e.appendChild(q(n))}),u.appendChild(e),f?f.refresh():f=new S(".gallery a",{captionsData:"alt",captionDelay:250})}function v(){u.innerHTML=""}function E(){y.hidden=!1}function m(){y.hidden=!0}function M(){L.hidden=!1}function h(){L.hidden=!0}function P(){if(!u.firstElementChild)return;const{height:o}=u.firstElementChild.getBoundingClientRect();window.scrollBy({top:o*2,behavior:"smooth"})}const B=document.querySelector("#search-form"),p=document.querySelector(".load-more");let l="",c=1,d=0;m();h();B.addEventListener("submit",x);p.addEventListener("click",I);async function x(o){if(o.preventDefault(),l=o.currentTarget.searchQuery.value.trim(),!l){s.warning({title:"Увага",message:"Введіть пошуковий запит!",position:"topRight"});return}c=1,d=0,v(),h(),o.currentTarget.searchQuery.value="";try{E();const e=await g(l,c);if(!e||e.hits.length===0){s.info({title:"Немає результатів",message:"За вашим запитом нічого не знайдено.",position:"topRight"});return}d=e.totalHits,b(e.hits),d>15&&M()}catch{s.error({title:"Помилка",message:"Не вдалося завантажити зображення. Спробуйте пізніше.",position:"topRight"})}finally{m()}}async function I(){c+=1,E(),p.disabled=!0;try{const o=await g(l,c);b(o.hits),P();const e=Math.ceil(d/15);c>=e&&(h(),s.info({title:"Кінець",message:"Більше зображень немає.",position:"topRight"}))}catch{s.error({title:"Помилка",message:"Не вдалося завантажити більше зображень.",position:"topRight"})}finally{m(),p.disabled=!1}}
//# sourceMappingURL=index.js.map
