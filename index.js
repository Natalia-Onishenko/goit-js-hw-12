import{a as w,S as q,i as a}from"./assets/vendor-5YrzWRhu.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const C="51915317-a5ee9a5ba63d3f1e31a6123a4",R="https://pixabay.com/api/";async function g(o,e=1){try{return(await w.get(R,{params:{key:C,q:o,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:15,page:e}})).data}catch(n){return console.error("Помилка запиту до Pixabay API:",n),null}}const y=document.querySelector(".gallery"),L=document.querySelector(".loader"),E=document.querySelector(".load-more");let h;function v(o){const e=document.createElement("li");e.classList.add("gallery-item");const n=document.createElement("a");n.href=o.largeImageURL;const i=document.createElement("img");i.src=o.webformatURL,i.alt=o.tags,i.loading="lazy",n.appendChild(i),e.appendChild(n);const t=document.createElement("p");t.classList.add("caption");const r=o.tags.split(",").map(s=>s.trim());return t.textContent=r.slice(0,3).join(", "),e.appendChild(t),e}function S(o){const e=document.createDocumentFragment();o.forEach(n=>{e.appendChild(v(n))}),y.appendChild(e),h?h.refresh():h=new q(".gallery a",{captionsData:"alt",captionDelay:250})}function M(){y.innerHTML=""}function P(){L.hidden=!1}function b(){L.hidden=!0}function x(){E.hidden=!1}function m(){E.hidden=!0}const B=document.querySelector("#search-form"),d=document.querySelector(".load-more"),c=document.querySelector(".loader"),p=document.querySelector(".gallery");let u="",l=1,f=0;b();m();B.addEventListener("submit",I);d.addEventListener("click",O);async function I(o){if(o.preventDefault(),u=o.currentTarget.searchQuery.value.trim(),!u){a.warning({title:"Увага",message:"Введіть пошуковий запит!",position:"topRight"});return}l=1,f=0,M(),m(),o.currentTarget.searchQuery.value="";try{P();const e=await g(u,l);if(!e||e.hits.length===0){a.info({title:"Немає результатів",message:"За вашим запитом нічого не знайдено.",position:"topRight"});return}f=e.totalHits,S(e.hits),f>15?x():a.info({title:"Кінець",message:"Більше зображень немає.",position:"topRight"})}catch{a.error({title:"Помилка",message:"Не вдалося завантажити зображення. Спробуйте пізніше.",position:"topRight"})}finally{b()}}async function O(){l+=1,d.hidden=!0,c.textContent="Loading my images. Wait, please",c.hidden=!1;try{const o=await g(u,l);if(S(o.hits),p.firstElementChild){const{height:n}=p.firstElementChild.getBoundingClientRect();window.scrollBy({top:n*2,behavior:"smooth"})}const e=Math.ceil(f/15);l>=e?(a.info({title:"Кінець",message:"Більше зображень немає.",position:"topRight"}),m()):(c.hidden=!0,d.hidden=!1)}catch{a.error({title:"Помилка",message:"Не вдалося завантажити більше зображень.",position:"topRight"}),c.hidden=!0,d.hidden=!1}}
//# sourceMappingURL=index.js.map
