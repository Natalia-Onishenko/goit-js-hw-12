{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"51915317-a5ee9a5ba63d3f1e31a6123a4\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Помилка запиту до Pixabay API:\", error);\n    return null;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet lightbox;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      (img) => `\n      <li class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\">\n          <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        </a>\n        <p class=\"photo-caption\">${img.tags}</p>\n      </li>`\n    )\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.hidden = false;\n}\n\nexport function hideLoader() {\n  loader.hidden = true;\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.hidden = false;\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.hidden = true;\n}","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoadMoreButton, hideLoadMoreButton, showLoader, hideLoader } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\".search-input\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst gallery = document.querySelector(\".gallery\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedImages = 0;\nlet isLoading = false;\n\nform.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  currentQuery = input.value.trim();\n  if (!currentQuery) return;\n\n  clearGallery();\n  hideLoadMoreButton();\n  currentPage = 1;\n  loadedImages = 0;\n\n  await fetchImages();\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  if (isLoading) return;\n  isLoading = true;\n\n  showLoader();\n  loadMoreBtn.disabled = true;\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    console.log(data); \n\n    if (!data || data.hits.length === 0) {\n      if (currentPage === 1) {\n        clearGallery();\n        gallery.insertAdjacentHTML(\n          \"beforeend\",\n          `<li class=\"gallery-item no-results\">Нічого не знайдено</li>`\n        );\n      }\n      return;\n    }\n\n    createGallery(data.hits);\n    loadedImages += data.hits.length;\n    totalHits = data.totalHits;\n\n    if (loadedImages < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n  } finally {\n    hideLoader();\n    loadMoreBtn.disabled = false;\n    isLoading = false;\n  }\n}\n\nfunction smoothScroll() {\n  if (!gallery.firstElementChild) return;\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","gallery","loader","loadMoreBtn","lightbox","createGallery","images","markup","img","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","currentQuery","currentPage","totalHits","loadedImages","isLoading","onSearch","onLoadMore","fetchImages","data","smoothScroll","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACtD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,eAAQ,MAAM,iCAAkCA,CAAK,EAC9C,IACR,CACH,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACEE,GAAQ;AAAA;AAAA,mBAEIA,EAAI,aAAa;AAAA,sBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,mCAErBA,EAAI,IAAI;AAAA,YAEtC,EACA,KAAK,EAAE,EACVP,EAAQ,mBAAmB,YAAaM,CAAM,EAEzCH,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIK,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7BT,EAAQ,UAAY,EACtB,CAEO,SAASU,GAAa,CAC3BT,EAAO,OAAS,EAClB,CAEO,SAASU,GAAa,CAC3BV,EAAO,OAAS,EAClB,CAEO,SAASW,GAAqB,CACnCV,EAAY,OAAS,EACvB,CAEO,SAASW,GAAqB,CACnCX,EAAY,OAAS,EACvB,CChDA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,eAAe,EAC9Cb,EAAc,SAAS,cAAc,YAAY,EACjDF,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIgB,EAAe,GACfC,EAAc,EACdC,EAAY,EACZC,EAAe,EACfC,EAAY,GAEhBN,EAAK,iBAAiB,SAAUO,CAAQ,EACxCnB,EAAY,iBAAiB,QAASoB,CAAU,EAEhD,eAAeD,EAAS,EAAG,CACzB,EAAE,eAAc,EAChBL,EAAeD,EAAM,MAAM,OACtBC,IAELP,IACAI,IACAI,EAAc,EACdE,EAAe,EAEf,MAAMI,EAAW,EACnB,CAEA,eAAeD,GAAa,CAC1BL,GAAe,EACf,MAAMM,EAAW,CACnB,CAEA,eAAeA,GAAc,CAC3B,GAAI,CAAAH,EACJ,CAAAA,EAAY,GAEZV,IACAR,EAAY,SAAW,GAEvB,GAAI,CACF,MAAMsB,EAAO,MAAM7B,EAAiBqB,EAAcC,CAAW,EAG7D,GAFA,QAAQ,IAAIO,CAAI,EAEZ,CAACA,GAAQA,EAAK,KAAK,SAAW,EAAG,CAC/BP,IAAgB,IAClBR,IACAT,EAAQ,mBACN,YACA,6DACV,GAEM,MACD,CAEDI,EAAcoB,EAAK,IAAI,EACvBL,GAAgBK,EAAK,KAAK,OAC1BN,EAAYM,EAAK,UAEbL,EAAeD,EACjBN,IAEAC,IAGFY,GACD,OAAQ1B,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRY,IACAT,EAAY,SAAW,GACvBkB,EAAY,EACb,EACH,CAEA,SAASK,GAAe,CACtB,GAAI,CAACzB,EAAQ,kBAAmB,OAChC,KAAM,CAAE,OAAQ0B,CAAU,EAAK1B,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACd,IAAK0B,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}