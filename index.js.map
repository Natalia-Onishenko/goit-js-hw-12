{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"51915317-a5ee9a5ba63d3f1e31a6123a4\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 40,\n        page: page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"Помилка запиту до Pixabay API:\", error);\n    return null;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loader\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet lightbox;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      (img) => `\n      <li class=\"gallery-item\">\n        <a href=\"${img.largeImageURL}\">\n          <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        </a>\n      </li>`\n    )\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.hidden = false;\n}\n\nexport function hideLoader() {\n  loader.hidden = true;\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.hidden = false;\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.hidden = true;\n}","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\nimport Notiflix from \"notiflix\";\n\nconst form = document.querySelector(\"#search-form\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedImages = 0;\nlet isLoading = false;\n\nform.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  currentQuery = e.target.elements[\"search-input\"].value.trim();\n  if (!currentQuery) {\n    Notiflix.Notify.info(\"Please enter a search query.\");\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  currentPage = 1;\n  loadedImages = 0;\n\n  await fetchImages();\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  await fetchImages();\n}\n\nasync function fetchImages() {\n  if (isLoading) return;\n  isLoading = true;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    if (!data || data.hits.length === 0) {\n      Notiflix.Notify.failure(\"Sorry, no images found.\");\n      return;\n    }\n\n    createGallery(data.hits);\n    loadedImages += data.hits.length;\n    totalHits = data.totalHits;\n\n    if (loadedImages < totalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      if (currentPage > 1) {\n        Notiflix.Notify.info(\"You've reached the end of results.\");\n      }\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.error(error);\n    Notiflix.Notify.failure(\"Error loading images. Try again later.\");\n  } finally {\n    hideLoader();\n    isLoading = false;\n  }\n}\n\nfunction smoothScroll() {\n  const gallery = document.querySelector(\".gallery\");\n  if (!gallery.firstElementChild) return;\n\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","gallery","loader","loadMoreBtn","lightbox","createGallery","images","markup","img","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","currentQuery","currentPage","totalHits","loadedImages","isLoading","onSearch","onLoadMore","Notiflix","fetchImages","data","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACtD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,eAAQ,MAAM,iCAAkCA,CAAK,EAC9C,IACR,CACH,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACEE,GAAQ;AAAA;AAAA,mBAEIA,EAAI,aAAa;AAAA,sBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,YAGnD,EACA,KAAK,EAAE,EACVP,EAAQ,mBAAmB,YAAaM,CAAM,EAEzCH,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIK,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7BT,EAAQ,UAAY,EACtB,CAEO,SAASU,GAAa,CAC3BT,EAAO,OAAS,EAClB,CAEO,SAASU,GAAa,CAC3BV,EAAO,OAAS,EAClB,CAEO,SAASW,GAAqB,CACnCV,EAAY,OAAS,EACvB,CAEO,SAASW,GAAqB,CACnCX,EAAY,OAAS,EACvB,CCvCA,MAAMY,EAAO,SAAS,cAAc,cAAc,EAC5CZ,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIa,EAAe,GACfC,EAAc,EACdC,EAAY,EACZC,EAAe,EACfC,EAAY,GAEhBL,EAAK,iBAAiB,SAAUM,CAAQ,EACxClB,EAAY,iBAAiB,QAASmB,CAAU,EAEhD,eAAeD,EAAS,EAAG,CAGzB,GAFA,EAAE,eAAc,EAChBL,EAAe,EAAE,OAAO,SAAS,cAAc,EAAE,MAAM,OACnD,CAACA,EAAc,CACjBO,EAAS,OAAO,KAAK,8BAA8B,EACnD,MACD,CAEDb,IACAI,IACAG,EAAc,EACdE,EAAe,EAEf,MAAMK,EAAW,CACnB,CAEA,eAAeF,GAAa,CAC1BL,GAAe,EACf,MAAMO,EAAW,CACnB,CAEA,eAAeA,GAAc,CAC3B,GAAI,CAAAJ,EACJ,CAAAA,EAAY,GACZT,IAEA,GAAI,CACF,MAAMc,EAAO,MAAM7B,EAAiBoB,EAAcC,CAAW,EAE7D,GAAI,CAACQ,GAAQA,EAAK,KAAK,SAAW,EAAG,CACnCF,EAAS,OAAO,QAAQ,yBAAyB,EACjD,MACD,CAEDlB,EAAcoB,EAAK,IAAI,EACvBN,GAAgBM,EAAK,KAAK,OAC1BP,EAAYO,EAAK,UAEbN,EAAeD,EACjBL,KAEAC,IACIG,EAAc,GAChBM,EAAS,OAAO,KAAK,oCAAoC,GAI7DG,GACD,OAAQ1B,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBuB,EAAS,OAAO,QAAQ,wCAAwC,CACpE,QAAY,CACRX,IACAQ,EAAY,EACb,EACH,CAEA,SAASM,GAAe,CACtB,MAAMzB,EAAU,SAAS,cAAc,UAAU,EACjD,GAAI,CAACA,EAAQ,kBAAmB,OAEhC,KAAM,CAAE,OAAQ0B,CAAU,EAAK1B,EAAQ,kBAAkB,wBAEzD,OAAO,SAAS,CACd,IAAK0B,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}